{% extends "./layouts/base.html" %}

{% block page_title %}Pinfinity Book Hub Gallery{% endblock %}

{% block page_description %}
A gallery and preview tool for HTML5 widgets used in iBooks Author.
{% endblock %}

{% block main_content %}
<div id="hub-gallery" class="page">
	<div class="row page-header">
		<h1 class="header light">Community widget gallery.
		<br /><span class="sub">Showing off the work of interactive HTML widget creators.</span>
		</h1>
	</div>
	{% if error %}
	<script>APP.track('error', {code: 'GALLERY_WIDGET_UPLOAD', message: "{{ error }}"});</script>
	<div class="row">
		<div class="alert error">
		<h4>Ooops. There was a problem with your submission:</h4>
		<p>{{ error }}
		<br /><a href="#upload-widget">Click here to skip to the form</a> and try again.
		</p>
		</div>
	</div>
	{% endif %}
	<div class="row gallery">
	{% for row in entries %}
		<div class="widget-column">
		{% for entry in row %}
		<div class="entry">
			<div class="entry-inner">
			<h3 class="header light">{{ entry.name }}</h3>
			<p class="entry-image"><img src="/hub/gallery/{{ entry.id }}/files/Default.png" />
			<p>
				<a class="track-link-conversion button"
					data-convert-name="gallery widget-preview"
					href="/hub/gallery/{{ entry.id }}/preview">Preview</a>
				<a class="track-link-conversion button"
					data-convert-name="gallery widget-download"
					href="/hub/downloads/{{ entry.id }}/{{ entry.zipname }}">Download</a>
			</p>
			</div>
		</div>
		{% endfor %}
		</div>
	{% endfor %}
	</div>
	<div id="upload-widget" class="row upload-widget">
		<h2 class="header light">What have you been working on?</h2>
		<p class="info">Just zip up your widget (.wdgt) directory, upload it, and then tell all your friends to come check it out.</p>

		<form id="widget-gallery-upload-form" class="form"
			action="/hub/gallery/" method="POST" enctype="multipart/form-data">

			<label for="gallery_file">Choose a .wdgt.zip file</label>
			<input id="gallery_file" name="gallery_file" type="file" />

			<label for="widget_name">Give it a name</label>
			<input type="text" id="widget_name" name="widget_name" />

			<label for="email_address">Your email address.</label>
			<input type="text" id="email_address" name="email_address" />

			<p class="legal">
			Your email is required for you to claim creative rights to a widget in
			case we end up creating user profiles in the future.  Our privacy policy
			is to never share, sell, or rent your email address to anyone. Ever.
			</p>

			<div class="form-actions">
				<button class="button" type="submit">Upload It!</button>
			</div>
		</form>
	</div>
</div>
{% endblock %}
